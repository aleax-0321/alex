<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        #demo {
            width: 300px;
            height: 300px;
            background: red;
            position: absolute;
        }
    </style>
</head>

<body>
    <div id="demo"></div>
    <script>
        // let demo = document.querySelector('#demo')

        let canMove = false

        let x = 0
        let y = 0

        demo.onmousedown = function (e) {
            //获取鼠标按下时的初始位置
            //offsetLeft 与定位父级的X轴距离
            //offsetTop 与定位父级的y轴距离
            x = e.pageX - demo.offsetLeft
            y = e.pageY - demo.offsetTop
            canMove = true
        }

        window.onmouseup = function () {
            canMove = false
        }


        window.onmousemove = function (e) {
            if (canMove) {
                let left = e.pageX - x
                let top = e.pageY - y

                //window.innerWidth 屏幕宽度    x.offsetWidth  自身宽度
                let maxLeft = window.innerWidth - demo.offsetWidth
                let maxTop = window.innerHeight - demo.offsetHeight

                if (left < 0) left = 0
                if (top < 0) top = 0
                if (left > maxLeft) left = maxLeft
                if (top > maxTop) top = maxTop

                demo.style.left = left + 'px'
                demo.style.top = top + 'px'
            }
        }


    </script>
</body>

</html>